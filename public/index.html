<!doctype html>
<html lang="id">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Zikanime - Streaming Anime</title>
        <link rel="icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="stylesheet" href="/style.css" />
    </head>
    <body class="landing-page">
        <!-- Scanline effect -->
        <div class="scanline"></div>

        <!-- Sidebar kiri -->
        <div class="sidebar">
            <div class="logo">Zikanime</div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="/" class="nav-link"> Home</a>
                </li>
                <li class="nav-item">
                    <a href="/profile" class="nav-link"> Profile</a>
                </li>
                <li class="nav-item">
                    <a href="/riwayat" class="nav-link"> Riwayat</a>
                </li>
                <li class="nav-item">
                    <a href="/login" class="nav-link" id="login-logout-link">
                        Login</a
                    >
                </li>
            </ul>
        </div>

        <!-- Konten utama -->
        <div class="main-content">
            <h1>Daftar Anime</h1>
            <div id="anime-grid" class="anime-grid">
                <!-- Akan diisi oleh JS -->
            </div>
        </div>

        <script src="/script.js"></script>
        <script>
            // Update link Login/Logout berdasarkan status
            (async function () {
                try {
                    const profile = await getProfile();
                    // Jika login, ubah link jadi Logout
                    const link = document.getElementById("login-logout-link");
                    link.textContent = "ðŸšª Logout";
                    link.href = "#";
                    link.addEventListener("click", async e => {
                        e.preventDefault();
                        await logout();
                        window.location.reload();
                    });
                } catch {
                    // Tidak login, biarkan
                }
            })();
        </script>
    </body>
</html>
