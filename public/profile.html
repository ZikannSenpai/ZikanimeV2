<!doctype html>
<html lang="id">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Zikanime - Profile</title>
        <link rel="icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="stylesheet" href="/style.css" />
    </head>
    <body class="landing-page">
        <div class="scanline"></div>

        <div class="sidebar">
            <div class="logo">Zikanime</div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="/" class="nav-link"> Home</a>
                </li>
                <li class="nav-item">
                    <a href="/profile" class="nav-link active"> Profile</a>
                </li>
                <li class="nav-item">
                    <a href="/riwayat" class="nav-link"> Riwayat</a>
                </li>
                <li class="nav-item">
                    <a href="/login" class="nav-link" id="login-logout-link">
                        Login</a
                    >
                </li>
            </ul>
        </div>

        <div class="main-content">
            <h1>Profile</h1>
            <div id="profile-info" class="profile-info">
                <p>
                    <strong>Username:</strong>
                    <span id="profile-username"></span>
                </p>
                <p>
                    <strong>Terdaftar sejak:</strong>
                    <span id="profile-created"></span>
                </p>
            </div>
        </div>

        <script src="/script.js"></script>
        <script>
            (async function () {
                try {
                    const profile = await getProfile();
                    // Update link login/logout
                    const link = document.getElementById("login-logout-link");
                    link.textContent = "ðŸšª Logout";
                    link.href = "#";
                    link.addEventListener("click", async e => {
                        e.preventDefault();
                        await logout();
                        window.location.href = "/";
                    });
                } catch {
                    // Tidak login, redirect ke login
                    window.location.href = "/login";
                }
            })();
        </script>
    </body>
</html>
